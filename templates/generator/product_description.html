{% extends 'base.html' %}

{% block content %}
<div class="min-h-screen bg-gray-50 py-8">
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
        <!-- Header -->
        <div class="mb-8">
            <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between">
                <div class="mb-4 sm:mb-0">
                    <h1 class="text-3xl font-bold text-gray-900">Generator Deskripsi Produk</h1>
                    <p class="text-gray-600 mt-2">Buat deskripsi produk yang menarik untuk ekonomi kreatif Indonesia</p>
                </div>
                <a href="{% url 'generator:dashboard' %}" class="w-full sm:w-auto inline-flex items-center justify-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50">
                    <i data-lucide="arrow-left" class="w-4 h-4 mr-2"></i>
                    Kembali
                </a>
            </div>
        </div>

        <!-- Generator Form -->
        <div class="bg-white border border-gray-200 rounded-lg p-6">
            <form method="post" id="generator-form">
                {% csrf_token %}
                
                <!-- Product Information -->
                <div class="mb-8">
                    <h2 class="text-xl font-semibold text-gray-900 mb-4">Informasi Produk</h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <label for="product_name" class="block text-sm font-medium text-gray-700 mb-2">
                                Nama Produk *
                            </label>
                            <input type="text" id="product_name" name="product_name" 
                                   value="{{ form_data.product_name|default:'' }}"
                                   class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-orange-500 focus:border-orange-500"
                                   placeholder="Contoh: Tas Rotan Handmade Bali" required>
                        </div>
                        
                        <div>
                            <label for="category" class="block text-sm font-medium text-gray-700 mb-2">
                                Kategori *
                            </label>
                            <select id="category" name="category" 
                                    class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-orange-500 focus:border-orange-500" required>
                                <option value="">Pilih Kategori</option>
                                <option value="fashion" {% if form_data.category == 'fashion' %}selected{% endif %}>Fashion</option>
                                <option value="kerajinan" {% if form_data.category == 'kerajinan' %}selected{% endif %}>Kerajinan Tangan</option>
                                <option value="makanan" {% if form_data.category == 'makanan' %}selected{% endif %}>Makanan & Minuman</option>
                                <option value="seni" {% if form_data.category == 'seni' %}selected{% endif %}>Seni & Lukisan</option>
                                <option value="furniture" {% if form_data.category == 'furniture' %}selected{% endif %}>Furniture</option>
                                <option value="aksesoris" {% if form_data.category == 'aksesoris' %}selected{% endif %}>Aksesoris</option>
                                <option value="lainnya" {% if form_data.category == 'lainnya' %}selected{% endif %}>Lainnya</option>
                            </select>
                        </div>
                        
                        <div>
                            <label for="price" class="block text-sm font-medium text-gray-700 mb-2">
                                Harga
                            </label>
                            <input type="text" id="price" name="price" 
                                   value="{{ form_data.price|default:'' }}"
                                   class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-orange-500 focus:border-orange-500"
                                   placeholder="Contoh: Rp 250.000">
                        </div>
                        
                        <div>
                            <label for="target_audience" class="block text-sm font-medium text-gray-700 mb-2">
                                Target Audience
                            </label>
                            <input type="text" id="target_audience" name="target_audience" 
                                   value="{{ form_data.target_audience|default:'' }}"
                                   class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-orange-500 focus:border-orange-500"
                                   placeholder="Contoh: Wanita muda 20-35 tahun">
                        </div>
                    </div>
                    
                    <div class="mt-6">
                        <label for="features" class="block text-sm font-medium text-gray-700 mb-2">
                            Fitur & Keunggulan Produk
                        </label>
                        <textarea id="features" name="features" rows="3" 
                                  class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-orange-500 focus:border-orange-500"
                                  placeholder="Jelaskan keunggulan dan fitur unik produk Anda...">{{ form_data.features|default:'' }}</textarea>
                    </div>
                    
                    <div class="mt-6">
                        <label for="brand_story" class="block text-sm font-medium text-gray-700 mb-2">
                            Cerita Brand (Optional)
                        </label>
                        <textarea id="brand_story" name="brand_story" rows="3" 
                                  class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-orange-500 focus:border-orange-500"
                                  placeholder="Ceritakan latar belakang atau misi brand Anda...">{{ form_data.brand_story|default:'' }}</textarea>
                    </div>
                </div>

                <!-- Generation Settings -->
                <div class="mb-8">
                    <h2 class="text-xl font-semibold text-gray-900 mb-4">Pengaturan Generator</h2>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                        <div>
                            <label for="tone" class="block text-sm font-medium text-gray-700 mb-2">
                                Tone
                            </label>
                            <select id="tone" name="tone" 
                                    class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-orange-500 focus:border-orange-500">
                                <option value="professional" {% if form_data.tone == 'professional' %}selected{% endif %}>Professional</option>
                                <option value="casual" {% if form_data.tone == 'casual' %}selected{% endif %}>Casual</option>
                                <option value="luxury" {% if form_data.tone == 'luxury' %}selected{% endif %}>Luxury</option>
                                <option value="friendly" {% if form_data.tone == 'friendly' %}selected{% endif %}>Friendly</option>
                                <option value="energetic" {% if form_data.tone == 'energetic' %}selected{% endif %}>Energetic</option>
                            </select>
                        </div>
                        
                        <div>
                            <label for="length" class="block text-sm font-medium text-gray-700 mb-2">
                                Panjang Konten
                            </label>
                            <select id="length" name="length" 
                                    class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-orange-500 focus:border-orange-500">
                                <option value="short" {% if form_data.length == 'short' %}selected{% endif %}>Pendek (50-100 kata)</option>
                                <option value="medium" {% if form_data.length == 'medium' %}selected{% endif %}>Sedang (100-200 kata)</option>
                                <option value="long" {% if form_data.length == 'long' %}selected{% endif %}>Panjang (200-400 kata)</option>
                            </select>
                        </div>
                        
                        <div>
                            <label for="variations" class="block text-sm font-medium text-gray-700 mb-2">
                                Jumlah Variasi
                            </label>
                            <select id="variations" name="variations" 
                                    class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-orange-500 focus:border-orange-500">
                                <option value="1" {% if form_data.variations == '1' %}selected{% endif %}>1 Variasi</option>
                                <option value="2" {% if form_data.variations == '2' %}selected{% endif %}>2 Variasi</option>
                                <option value="3" {% if form_data.variations == '3' %}selected{% endif %}>3 Variasi</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- Advanced Settings -->
                <div class="mb-8">
                    <details class="group">
                        <summary class="cursor-pointer flex items-center text-lg font-medium text-gray-900 mb-4 group-open:text-orange-600">
                            <i data-lucide="settings" class="w-5 h-5 mr-2"></i>
                            Advanced Settings (Optional)
                        </summary>
                        <div class="pl-4 border-l-2 border-gray-200">
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div>
                                    <label for="model_type" class="block text-sm font-medium text-gray-700 mb-2">
                                        AI Model
                                    </label>
                                    <select id="model_type" name="model_type" 
                                            class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-orange-500 focus:border-orange-500">
                                        <option value="fast" {% if form_data.model_type == 'fast' %}selected{% endif %}>Fast (Cepat & Hemat)</option>
                                        <option value="quality" {% if form_data.model_type == 'quality' %}selected{% endif %}>Quality (Kualitas Tinggi)</option>
                                    </select>
                                    <p class="text-xs text-gray-500 mt-1">Fast model lebih cepat dan murah, Quality model menghasilkan konten yang lebih baik</p>
                                </div>
                                
                                <div>
                                    <label for="unique_selling_point" class="block text-sm font-medium text-gray-700 mb-2">
                                        Unique Selling Point
                                    </label>
                                    <input type="text" id="unique_selling_point" name="unique_selling_point" 
                                           value="{{ form_data.unique_selling_point|default:'' }}"
                                           class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-orange-500 focus:border-orange-500"
                                           placeholder="Apa yang membuat produk Anda unik?">
                                </div>
                            </div>
                        </div>
                    </details>
                </div>

                <!-- Generate Button -->
                <div class="mt-8 text-center">
                    <button type="submit" id="generate-btn" 
                            class="w-full sm:w-auto inline-flex items-center justify-center bg-orange-500 hover:bg-orange-600 text-white px-8 py-3 rounded-md text-lg font-medium transition-colors disabled:bg-orange-300">
                        <i data-lucide="sparkles" class="w-5 h-5 mr-2"></i>
                        <span id="generate-btn-text">Generate Deskripsi Produk</span>
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>

<script>
document.getElementById('generator-form').addEventListener('submit', function(e) {
    const btn = document.getElementById('generate-btn');
    const icon = btn.querySelector('i');
    const textSpan = document.getElementById('generate-btn-text');
    
    btn.disabled = true;
    textSpan.textContent = 'Generating...';
    
    // Create a loader icon
    const loaderIcon = document.createElement('i');
    loaderIcon.setAttribute('data-lucide', 'loader-2');
    loaderIcon.classList.add('w-5', 'h-5', 'mr-2', 'animate-spin');
    
    // Replace sparkles icon with loader
    icon.replaceWith(loaderIcon);
    lucide.createIcons();
});
</script>
{% endblock %}